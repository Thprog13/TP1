type User @table {
  username: String!
  passwordHash: String!
  createdAt: Timestamp!
  displayName: String
  avatarUrl: String
  lastSeen: Timestamp
}

type DirectMessage @table {
  sender: User!
  recipient: User!
  content: String!
  sentAt: Timestamp!
  readAt: Timestamp
}

type GroupChat @table {
  name: String!
  createdAt: Timestamp!
  creator: User!
  description: String
  avatarUrl: String
}

type GroupMembership @table(key: ["user", "groupChat"]) {
  user: User!
  groupChat: GroupChat!
  joinedAt: Timestamp!
  isAdmin: Boolean
}

type GroupMessage @table {
  sender: User!
  groupChat: GroupChat!
  content: String!
  sentAt: Timestamp!
}